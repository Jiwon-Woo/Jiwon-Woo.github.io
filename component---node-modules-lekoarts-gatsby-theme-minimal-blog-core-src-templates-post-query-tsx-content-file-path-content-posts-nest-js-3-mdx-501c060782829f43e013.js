"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[564],{4765:function(e,t,n){n.d(t,{F:function(){return p},Z:function(){return u}});var r=n(7294),a=n(8733),s=n(795),i=n(8377),l=n(6799),o=n(8871);var c=e=>{let{post:t}=e;return null};const g=["16px","8px","4px"].map((e=>`rgba(0, 0, 0, 0.1) 0px ${e} ${e} 0px`));var m=e=>{let{data:{post:t},children:n}=e;return(0,a.tZ)(i.Z,null,(0,a.tZ)(s.X6,{as:"h1",variant:"styles.h1"},t.title),(0,a.tZ)("p",{sx:{color:"secondary",mt:3,a:{color:"secondary"},fontSize:[1,1,2]}},(0,a.tZ)("time",null,t.date),t.tags&&(0,a.tZ)(r.Fragment,null," — ",(0,a.tZ)(l.Z,{tags:t.tags})),t.timeToRead&&" — ",t.timeToRead&&(0,a.tZ)("span",null,t.timeToRead," min read")),(0,a.tZ)("section",{sx:{my:5,".gatsby-resp-image-wrapper":{my:[4,4,5],borderRadius:"4px",boxShadow:g.join(", "),".gatsby-resp-image-image":{borderRadius:"4px"}},variant:"layout.content"}},n),(0,a.tZ)(c,{post:t}))};const p=e=>{var t,n,r;let{data:{post:s}}=e;return(0,a.tZ)(o.Z,{title:s.title,description:s.description?s.description:s.excerpt,image:s.banner?null===(t=s.banner)||void 0===t||null===(n=t.childImageSharp)||void 0===n||null===(r=n.resize)||void 0===r?void 0:r.src:void 0,pathname:s.slug,canonicalUrl:s.canonicalUrl})};function u(e){let{...t}=e;return r.createElement(m,t)}},6799:function(e,t,n){var r=n(8733),a=n(7294),s=n(1883),i=n(3494),l=n(9706);t.Z=e=>{let{tags:t}=e;const{tagsPath:n,basePath:o}=(0,i.Z)();return(0,r.tZ)(a.Fragment,null,t.map(((e,t)=>(0,r.tZ)(a.Fragment,{key:e.slug},!!t&&", ",(0,r.tZ)(s.Link,{sx:e=>{var t;return{...null===(t=e.styles)||void 0===t?void 0:t.a}},to:(0,l.Z)(`/${o}/${n}/${e.slug}`)},e.name)))))}},8871:function(e,t,n){var r=n(7294),a=n(1883),s=n(4232);t.Z=e=>{let{title:t="",description:n="",pathname:i="",image:l="",children:o=null,canonicalUrl:c=""}=e;const g=(0,s.Z)(),{siteTitle:m,siteTitleAlt:p,siteUrl:u,siteDescription:d,siteImage:E,author:h,siteLanguage:w}=g,b={title:t?`${t} | ${m}`:p,description:n||d,url:`${u}${i||""}`,image:`${u}${l||E}`};return r.createElement(r.Fragment,null,r.createElement("html",{lang:w}),r.createElement("title",null,b.title),r.createElement("meta",{name:"description",content:b.description}),r.createElement("meta",{name:"image",content:b.image}),r.createElement("meta",{property:"og:title",content:b.title}),r.createElement("meta",{property:"og:url",content:b.url}),r.createElement("meta",{property:"og:description",content:b.description}),r.createElement("meta",{property:"og:image",content:b.image}),r.createElement("meta",{property:"og:type",content:"website"}),r.createElement("meta",{property:"og:image:alt",content:b.description}),r.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),r.createElement("meta",{name:"twitter:title",content:b.title}),r.createElement("meta",{name:"twitter:url",content:b.url}),r.createElement("meta",{name:"twitter:description",content:b.description}),r.createElement("meta",{name:"twitter:image",content:b.image}),r.createElement("meta",{name:"twitter:image:alt",content:b.description}),r.createElement("meta",{name:"twitter:creator",content:h}),r.createElement("meta",{name:"gatsby-theme",content:"@lekoarts/gatsby-theme-minimal-blog"}),r.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:(0,a.withPrefix)("/favicon-32x32.png")}),r.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:(0,a.withPrefix)("/favicon-16x16.png")}),r.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:(0,a.withPrefix)("/apple-touch-icon.png")}),c?r.createElement("link",{rel:"canonical",href:c}):null,o)}},8380:function(e,t,n){n.r(t),n.d(t,{Head:function(){return l.F},default:function(){return o}});var r=n(7294),a=n(1151);function s(e){const t=Object.assign({p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",h4:"h4",span:"span",blockquote:"blockquote",a:"a"},(0,a.ah)(),e.components);return r.createElement(r.Fragment,null,r.createElement(t.p,null,"나는 swagger를 꽤 좋아하는 편이다.\n",r.createElement("br"),"귀찮은 문서 작업을 자동화해 주는 데다가, API 테스트도 쉽게 할 수 있다.\n",r.createElement("br"),"프로젝트 첫 시작에서 멈춰있게 되는 일반 문서와 달리 관리가 편하고, 프론트 분들과 협업하기 딱 맞는다는 생각이 든다.\n",r.createElement("br"),"그래서 나는 프로젝트를 시작할 때, swagger를 도입하자고 적극 주장하는 편이다."),"\n",r.createElement("br"),"\n",r.createElement(t.h2,null,"패키지 설치"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-bash"},"yarn add @nestjs/swagger\n")),"\n",r.createElement(t.p,null,"이 글에서 사용하고 있는 ",r.createElement(t.code,null,"@nestjs/swagger")," 버전은 ",r.createElement(t.code,null,"7.2.0")," 이다."),"\n",r.createElement("br"),"\n",r.createElement(t.h2,null,"NestJs 설정"),"\n",r.createElement(t.h3,null,r.createElement(t.code,null,"main.ts")),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-ts"},"import { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nimport { Logger } from '@nestjs/common';\nimport { DocumentBuilder, SwaggerCustomOptions, SwaggerModule } from '@nestjs/swagger';\nimport { ValidationPipe } from '@nestjs/common';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  ...\n\n  // swagger 설정\n  const swaggerConfig = new DocumentBuilder()\n    .setTitle('Together')\n    .setDescription('The together API description')\n    .setVersion('1.0')\n    .addBearerAuth({\n      type: 'http',\n      scheme: 'bearer',\n      name: 'JWT',\n      in: 'header',\n    })\n    .build();\n  const swaggerDocument = SwaggerModule.createDocument(app, swaggerConfig);\n  const swaggerCustomOptions: SwaggerCustomOptions = {\n    swaggerOptions: {\n      persistAuthorization: true,\n    },\n  };\n  SwaggerModule.setup('swagger', app, swaggerDocument, swaggerCustomOptions);\n\n  const port = process.env.BACK_PORT || 9999;\n  await app.listen(port);\n  Logger.log(`Server running on ${port}`);\n}\nbootstrap();\n")),"\n",r.createElement("br"),"\n",r.createElement(t.h3,null,r.createElement(t.code,null,"swaggerConfig")),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-ts"},"const swaggerConfig = new DocumentBuilder()\n  .setTitle('Together')\n  .setDescription('The together API description')\n  .setVersion('1.0')\n  .addBearerAuth({\n    type: 'http',\n    scheme: 'bearer',\n    name: 'JWT',\n    in: 'header',\n  })\n  .build();\nconst swaggerDocument = SwaggerModule.createDocument(app, swaggerConfig);\n")),"\n",r.createElement(t.p,null,r.createElement(t.code,null,"DocumentBuilder")," 로 swagger 문서를 구성할 수 있고, 메서드로 기본 설정을 해줄 수 있다.\n",r.createElement("br"),"여기서 ",r.createElement(t.code,null,"addBearerAuth")," 설정은 jwt를 이용한 api를 swagger에서 사용할 수 있게 도와준다.\n",r.createElement("br"),"그리고 ",r.createElement(t.code,null,"SwaggerModule")," 의 ",r.createElement(t.code,null,"createDocument")," 함수를 통해 swagger 문서를 생성하게 된다."),"\n",r.createElement(t.p,null,"참고로 ",r.createElement(t.code,null,"DocumentBuilder")," 클래스의 함수는 다음과 같다."),"\n",r.createElement("br"),"\n",r.createElement(t.h3,null,r.createElement(t.code,null,"DocumentBuilder")),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-ts"},"import { OpenAPIObject } from './interfaces';\nimport { ExternalDocumentationObject, ParameterObject, SecurityRequirementObject, SecuritySchemeObject, ServerVariableObject } from './interfaces/open-api-spec.interface';\nexport declare class DocumentBuilder {\n    private readonly logger;\n    private readonly document;\n    setTitle(title: string): this;\n    setDescription(description: string): this;\n    setVersion(version: string): this;\n    setTermsOfService(termsOfService: string): this;\n    setContact(name: string, url: string, email: string): this;\n    setLicense(name: string, url: string): this;\n    addServer(url: string, description?: string, variables?: Record<string, ServerVariableObject>): this;\n    setExternalDoc(description: string, url: string): this;\n    setBasePath(path: string): this;\n    addTag(name: string, description?: string, externalDocs?: ExternalDocumentationObject): this;\n    addExtension(extensionKey: string, extensionProperties: any): this;\n    addSecurity(name: string, options: SecuritySchemeObject): this;\n    addGlobalParameters(...parameters: ParameterObject[]): this;\n    addSecurityRequirements(name: string | SecurityRequirementObject, requirements?: string[]): this;\n    addBearerAuth(options?: SecuritySchemeObject, name?: string): this;\n    addOAuth2(options?: SecuritySchemeObject, name?: string): this;\n    addApiKey(options?: SecuritySchemeObject, name?: string): this;\n    addBasicAuth(options?: SecuritySchemeObject, name?: string): this;\n    addCookieAuth(cookieName?: string, options?: SecuritySchemeObject, securityName?: string): this;\n    build(): Omit<OpenAPIObject, 'paths'>;\n}\n")),"\n",r.createElement("br"),"\n",r.createElement(t.h3,null,"swaggerOptions"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-ts"},"const swaggerOptions: SwaggerCustomOptions = {\n  swaggerOptions: {\n    persistAuthorization: true,\n  },\n};\n")),"\n",r.createElement(t.p,null,r.createElement(t.code,null,"SwaggerCustomOptions")," 는 swagger의 상세 설정을 도와준다.\n",r.createElement("br"),r.createElement(t.code,null,"swaggerOptions: { persistAuthorization: true }")," 은 BearerToken과 관련된 옵션으로, 새로고침을 해도 swagger에 저장한 BearerToken 값이 날아가지 않게 해준다."),"\n",r.createElement(t.p,null,"참고로 ",r.createElement(t.code,null,"SwaggerCustomOptions")," 인터페이스는 아래와 같다."),"\n",r.createElement("br"),"\n",r.createElement(t.h3,null,"SwaggerCustomOptions"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-ts"},"import { SwaggerUiOptions } from './swagger-ui-options.interface';\nimport { OpenAPIObject } from './open-api-spec.interface';\nexport interface SwaggerCustomOptions {\n    useGlobalPrefix?: boolean;\n    explorer?: boolean;\n    swaggerOptions?: SwaggerUiOptions;\n    customCss?: string;\n    customCssUrl?: string | string[];\n    customJs?: string | string[];\n    customJsStr?: string | string[];\n    customfavIcon?: string;\n    customSwaggerUiPath?: string;\n    swaggerUrl?: string;\n    customSiteTitle?: string;\n    validatorUrl?: string;\n    url?: string;\n    urls?: Record<'url' | 'name', string>[];\n    jsonDocumentUrl?: string;\n    yamlDocumentUrl?: string;\n    patchDocumentOnRequest?: <TRequest = any, TResponse = any>(req: TRequest, res: TResponse, document: OpenAPIObject) => OpenAPIObject;\n}\n")),"\n",r.createElement("br"),"\n",r.createElement(t.h4,null,"createDocument & setup"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-ts"},"SwaggerModule.setup('swagger', app, swaggerDocument, swaggerCustomOptions);\n")),"\n",r.createElement(t.p,null,r.createElement(t.code,null,"SwaggerModule")," 의 ",r.createElement(t.code,null,"setup")," 함수는 swagger ui를 볼 수 있는 path를 설정해준다. 위의 코드는 ",r.createElement(t.code,null,"{백엔드 주소}/swagger")," 로 들어가면 생성된 swagger 문서를 확인할 수 있다."),"\n",r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 54.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABKElEQVR42qXPTU7CQBiA4blmxbVb4gW8kDuPQEzcSEJMTBBtsZSW/k9/KdOWvk4TDkBxkiezmJk334jHpwfm8zmz2T13xgzDMP5F7B0f2/bwY5u82TGc4XzutfNNhJSSKErIi4zmVKKUuknXdrSqRXBZwzBONkyeaNBU3yJVRdk2iE419J3SB/1N0DodrHSsHoPvpmQb6PpRIcsTWXVRq0nySu/lEfFh66Cf07Q9ZdNpLcVxpCbJR/UJsdh0rLYFththuQluVBJmDXGuSIr2auP9UNaIZztl4UR8uz6fzoGNH2NGkn1R4+ovXMvJKswgQvy8vmCt3rAtC2u9xrFMvN0vWeSTx8F1kpA08NhvTcRyGfK1DvEPMQcvJY5LZFqTanKCNBnfVPwBZKcpthqbmRgAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="swagger"\n        title=""\n        src="/static/de197b5926d4d363e60d97af1a7e06fd/7d769/swagger.png"\n        srcset="/static/de197b5926d4d363e60d97af1a7e06fd/5243c/swagger.png 240w,\n/static/de197b5926d4d363e60d97af1a7e06fd/ab158/swagger.png 480w,\n/static/de197b5926d4d363e60d97af1a7e06fd/7d769/swagger.png 960w,\n/static/de197b5926d4d363e60d97af1a7e06fd/87339/swagger.png 1440w,\n/static/de197b5926d4d363e60d97af1a7e06fd/88b03/swagger.png 1920w,\n/static/de197b5926d4d363e60d97af1a7e06fd/08e37/swagger.png 2928w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",r.createElement(t.p,null,"NestJS swagger는 기본적으로 Controller 기반으로 api 주소를 맵핑해준다. 하지만 그 외의 request나 response 형태는 데코레이터를 통해 추가로 설정해주어야 한다."),"\n",r.createElement("br"),"\n",r.createElement(t.h3,null,"참고"),"\n",r.createElement(t.blockquote,null,"\n",r.createElement(t.p,null,r.createElement(t.a,{href:"https://any-ting.tistory.com/122"},"[Nest.js] Nest.js API 만들기 (12) - API 문서화(Swagger)"),"\n",r.createElement("br")," ",r.createElement(t.a,{href:"https://popawaw.tistory.com/183"},"Nestjs 에서 swagger 사용하기"),"\n",r.createElement("br")," ",r.createElement(t.a,{href:"https://jhyeok.com/nestjs-swagger/"},"NestJS에서 Swagger를 사용하는 방법"),"\n",r.createElement("br")," ",r.createElement(t.a,{href:"https://velog.io/@glowforever/NESTJS%EB%A1%9C-Swagger-%EB%AC%B8%EC%84%9C%ED%99%94-%ED%95%98%EA%B8%B0"},"NESTJS로 Swagger 문서화 하기"),"\n",r.createElement("br")," ",r.createElement(t.a,{href:"https://velog.io/@mhj6380/Nestjs-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90-Swagger-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0"},"Nestjs 프로젝트에 Swagger 도입하기"),"\n",r.createElement("br")," ",r.createElement(t.a,{href:"https://blog.naver.com/pjt3591oo/222461534913"},"[nestjs]swagger를 이용하여 api 문서화")),"\n"))}var i=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?r.createElement(t,e,r.createElement(s,e)):s(e)},l=n(4765);function o(e){return r.createElement(l.Z,e,r.createElement(i,e))}l.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-nest-js-3-mdx-501c060782829f43e013.js.map